# no-loss-lottery

Solana Riptide Hackathon

## test

```bash
anchor test
```

## prompt

No-loss lottery: Build a platform for users to deposit a variety of tokens into a pool and then connect the pool to a Solana lending protocol which aggregates funds and rewards the interest to a winner over a period of time.


## DB thoughts

- users choose 6 numbers, creates PDA numbers and vault pubkey as seed
- users calls `buy` adds in their PDA, receives ticket
- cranks call `draw`, draw selects 6 random numbers and sets these in vault manager config
- cranks call `find`, pass in PDA derived from 6 random numbers generated by `draw`
- if `find` doesnt error, program end lottery and write winner pubkey to vault manager account. Users can redeem their tickets for their tokens
- if `find` errors, it means there is no PDA with that seed, there is no winner

### TODO

- VRF to pick a random winning ticket
- lottery fees come from prize to me
- close accounts after
- draw cadence instead of draw time
- check vault manager for winner info
- reset cadence and winning numbers if no winner found
- figure out optimal numbers array size or make configurable
- configure withdraw to give prize to winner
- what happens if winner never claims?
- do not use ata for vault tickets
- variable fee

#### Solve

- Automate staking
- Automate fees for us
- VRF
- How to make the tickets transferrable?